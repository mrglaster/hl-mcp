# Ham_Weapon_PrimaryAttack Вызывается при основной атаке определенным оружием
[Ham Sandwich](http://amxxmodx.ru/hamsandwich/) [ham_const.inc](http://amxxmodx.ru/hamsandwich/ham_constinc/)
В CS одним из важных моментов является атака игрока, а если этот момент важен, то появляется желание поработать с этим моментом, с помощью модуля функции **Ham_Weapon_PrimaryAttack** возможно отловить любую основную атаку игрока для определенного оружия.  
  
Инфо из **ham_const.inc:**  
```
    /**  
     * Description:        Called when the main attack of a weapon is triggered.  
     * Forward params:    function(this)  
     * Return type:        None.  
     * Execute params:    ExecuteHam(Ham_Weapon_PrimaryAttack, this);  
     */  
    Ham_Weapon_PrimaryAttack
```
  
  
В исполняемую функцию будет переда один параметр - айди оружия.  
**Вот так можно получить айди игрока**( модуль fakemeta)  
```
new id = pev(weapon,pev_owner)
```
  
  
**Пример:**  
```
/* Plugin generated by AMXX-Studio */  
  
#include <amxmodx>  
#include <amxmisc>  
  
#include <fakemeta>  
#include <hamsandwich>  
  
#define PLUGIN "[ham_cons.inc] Ham_Weapon_PrimaryAttack"  
#define VERSION "1.0"  
#define AUTHOR "Admin"  
  
  
public plugin_init() {  
    register_plugin(PLUGIN, VERSION, AUTHOR)  
  
    RegisterHam(Ham_Weapon_PrimaryAttack ,"weapon_knife","f_knife_attack")  
  
}  
public f_knife_attack(weapon){  
      
    new id = pev(weapon,pev_owner)  
      
    new name[32]  
    get_user_name(id,name,31)  
      
    client_print(id,print_chat,"%s knife attack",name)  
      
}
```
  
  
**Описание:**  
В примере отлавливается основная атака ножом, обратите внимание, что регистрируется функция для одного вида оружия, а не для всех.При этом можно зарегистрировать несколько разных видов оружия и назначить им одну исполняемую функцию.  
  
В функцию приходит id оружия, а не игрока, **как получить id игрока описано выше** и показано в примере.
