# Record Demo Question
[Готовые скрипты](http://amxxmodx.ru/scripts/)
![Record Demo Question](http://amxxmodx.ru/uploads/posts/2014-08/1408382710_banner.png)
  
  
Плагин просит разрешения на запись демо. Если игрок не согласится, его кикнет с сервера. Я постарался сделать плагин по-настоящему удобным и универсальным. Нестандартные кнопки. **Меню всегда появляется в удачный момент. У игроков много демок не накапливается.**  
  
**Авторы:** Serjant и Safety1st  
**Версия:** 0.3 от 18.08.2014  
**Скачать:** [официальный топик](http://amxxmodx.ru/engine/go.php?url=aHR0cDovL2Mtcy5uZXQudWEvZm9ydW0vaW5kZXgucGhwP2FjdD1maW5kcG9zdCZhbXA7cGlkPTU4ODI4Nw%3D%3D)  
  

![](http://amxxmodx.ru/templates/3week92/dleimages/spoiler-plus.gif) [Основные недостатки оригинальной версии:](javascript:ShowOrHide\('sp9d979964d644978d7146f35e539b949a'\))
• хитрецы перекрывают меню рекордера другим и таким образом избегают выбора в меню;  
• может произойти ситуация, что меню рекордера перекрывает меню выбора класса (скина). т.о. игрок остаётся без класса, возрождается с помощью VIP-меню и творит на сервере 'чудеса', оставаясь невидимым;  
• у игроков скапливается куча демок.
  
**Изменения** - добрейшие:  
• меню плагина не перекрывает никакие другие меню. если игроку меню в данный момент показать нельзя – оно будет показано позже;  
• меню показывается игроку сразу после выбора класса, но только если тот не заспавнился. для отключения закомментировать строку с _SHOW_AFTER_CLASS_CHOOSING_ ;  
• если меню не было показано при выборе класса, оно показывается игроку после смерти. для отключения закомментировать строку с _SHOW_AFTER_DEATH_ ;  
• если обе предыдущие опции отключены, плагин периодически пытается показать меню новому игроку (см. ниже);  
• игрок, не сделавший выбор в меню за отведённое время (см. ниже), удаляется с сервера;  
• в настройках можно задать, какие именно кнопки использовать в меню: строки с _BUTTON_OK_ и _BUTTON_CANCEL_ ;  
• демки именуются в формате '_префикс_название_карты_ ';  
• упразднены cvar'ы.  
  
**Все настройки задаются в начале исходника. Остальные имеющиеся:**  
• _DEMO_PREFIX_ - префикс в названии демки;  
• _gflMenuDelay_ - сколько времени даётся игроку на выбор, а также интервал повторных попыток показа меню. '.0' на конце обязателен!  
• _THEONLY_DEMO_ - раскомментируйте, чтобы название карты не входило в состав названия демки. тогда новая демка будет всегда перезаписывать старую;  
• игроки с флагом _IMMUNITY_FLAG_ освобождены от обязательной записи демки, по дефолту это флаг 'a'. чтобы отключить 'иммунитет' - закомментируйте строку с _IMMUNITY_FLAG_. Несколько флагов для иммунитета указываются так:  

#define IMMUNITY_FLAG ( ADMIN_IMMUNITY | ADMIN_BAN )
• меню и сообщение при кике настраиваются в словаре.  
  

![](http://amxxmodx.ru/templates/3week92/dleimages/spoiler-plus.gif) [Скрин](javascript:ShowOrHide\('sp55a19d64c26aac72c65ef5828e280a7c'\))
[![Record Demo Question](http://amxxmodx.ru/uploads/posts/2014-08/thumbs/1408382688_image.jpg)](http://amxxmodx.ru/uploads/posts/2014-08/1408382688_image.jpg)
  

![](http://amxxmodx.ru/templates/3week92/dleimages/spoiler-plus.gif) [Дополнительная информация](javascript:ShowOrHide\('sp5095ad895d16bdfeb52faa67b4b33ebd'\))
Дефолтные опции – _SHOW_AFTER_CLASS_CHOOSING_ и _SHOW_AFTER_DEATH_ – рекомендуемые. С ними меню будет показываться только мёртвым игрокам: сразу после выбора класса или сразу после смерти (смотря что наступит раньше ;). Это подойдёт для большинства серверов. Но на некоторых одна или обе из них будут лишними и/или приведут к проблемам. Например, на CSDM нужно выключить _SHOW_AFTER_DEATH_ : там респавн игроков, меню рекордера, показанное после смерти, может быть перекрыто меню /guns при спавне, и игрока в итоге кикнет. На серверах JailBreak, KZ и прочих, где игроки принудительно загоняются в одну из команд, наоборот, не нужна и будет лишней опция _SHOW_AFTER_CLASS_CHOOSING_ : игроки просто не доходят до выбора класса. Когда опция _SHOW_AFTER_DEATH_ выключена, но _SHOW_AFTER_CLASS_CHOOSING_ – включена и игрок после выбора класса заспавнился, будут выполняться попытки показать ему меню с интервалом _gflMenuDelay_ в независимости от того, мёртв он или нет. В общем, если есть какие-то сомнения, что всё будет работать корректно c конкретными настройками, нужно самому проверить все варианты на сервере.
