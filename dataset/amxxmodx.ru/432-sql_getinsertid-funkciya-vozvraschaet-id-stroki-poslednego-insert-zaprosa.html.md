# SQL_GetInsertId Функция возвращает id строки последнего INSERT запроса
[SQLx](http://amxxmodx.ru/sqlx/)
Если необходимо получить id строки которую только что добавили в базу данных с помощью оператора INSERT, то функция **SQL_GetInsertId** в этом лучший помощник.Примечание: Совместное использование с функцией **SQL_ThreadQuery**  
  
Инфо из **sqlx.inc:**  
```
/**  
 * Returns the insert id of the last INSERT query.   
 * Returns 0 otherwise.  
 */  
native SQL_GetInsertId(Handle:query);
```
  
  
**Синтаксис:**  

SQL_GetInsertId(Handle:query)
  

    * **Handle:query** - Идентификатор запроса  

  
  
**Тип функции:**  
Native  
  
**Пример:**  
```
/* Plugin generated by AMXX-Studio */  
  
#include <amxmodx>  
#include <amxmisc>  
#include <sqlx>  
  
#define PLUGIN "[http://amxxmodx.ru] SQL_GetInsertId"  
#define VERSION "1.0"  
#define AUTHOR "Admin"  
  
new Handle:SQL_Tuple  
  
public plugin_init() {  
      
    register_plugin(PLUGIN, VERSION, AUTHOR)  
    register_cvar("SQLx_host","127.0.0.1")  
    register_cvar("SQLx_db","amxxmodx")  
    register_cvar("SQLx_user","admin")  
    register_cvar("SQLx_password","pass")  
      
    register_concmd("sql_Query","sql_Query")  
}  
public plugin_cfg(){  
    new host[33],dbase[33],user[33],pass[33]  
    get_cvar_string("SQLx_host",host,30)  
    get_cvar_string("SQLx_db",dbase,30)  
    get_cvar_string("SQLx_user",user,30)  
    get_cvar_string("SQLx_password",pass,30)  
    SQL_Tuple = SQL_MakeDbTuple(host,user,pass,dbase)   
      
}  
public sql_Query(){  
  
    new query[256],data[2]  
    format(query,charsmax(query),"INSERT INTO `table` VALUES (1,1,1)")      
  
    SQL_ThreadQuery(SQL_Tuple,"QueryHandler",query,data,charsmax(data))  
      
}  
public QueryHandler(FailState, Handle:Query, error[], err, data[], size, Float:querytime){  
  
    if(FailState != TQUERY_SUCCESS)  
    {  
        log_amx("sql error: %d (%s)", err, error)  
        return  
    }  
      
    new id = SQL_GetInsertId(Query)  
    server_print("InsertId [%d]",id)  
      
}
```
  
  
**Описание:**  
В данном кусочке получает id последней вставленной строки в таблицу и вывод в консоль сервера.  
```
    new id = SQL_GetInsertId(Query)  
    server_print("InsertId [%d]",id)
```

