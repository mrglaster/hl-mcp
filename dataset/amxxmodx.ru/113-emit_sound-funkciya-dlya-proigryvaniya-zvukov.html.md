# emit_sound Функция для проигрывания звуков
[Ядро AMXx](http://amxxmodx.ru/core/) [amxmodx.inc](http://amxxmodx.ru/core/amxmodxinc/)
Захотелось добавить своих звуков на сервер? Вы пришли по адресу. С помощью функции **emit_sound** , можно проиграть звук любому игроку на сервере или одновременно всем,функция достаточно функциональна, но у меня к сожалению не было времени детально изучить все ее возможности, оставлю эту занимательную процедуру вам.  
  
Инфо из **amxmodx.inc:**  
```
/* Emits sound. Sample must be precached. */  
native emit_sound(index, channel, const sample[], Float:vol, Float:att,flags, pitch);
```
  
  
**Синтаксис:**  

emit_sound ( index, channel, sample[], Float:vol, Float:att,flags, pitch )
  

    * **index** - id игрока или 0 если надо проиграть всем игрокам одновременно  

    * **channel** - Канал проигрывания звука, честно говоря не проверял как каждый из них работает:  

      * #define CHAN_AUTO 0   

      * #define CHAN_WEAPON 1 (Воспроизводится, пока не: пока не выстрелишь. артист©)  

      * #define CHAN_VOICE 2 (Воспроизводится, пока не: получишь урон. igas©)(было: будет слышно всем кто стоит рядом с игроком)  

      * #define CHAN_ITEM 3 (Воспроизводится, пока не: пока не сменишь оружие. артист©)  

      * #define CHAN_BODY 4 (Воспроизводится, пока не: пока не будет шагов. артист©)  

      * #define CHAN_STREAM 5 /* allocate stream channel from the static or dynamic area */   

      * #define CHAN_STATIC 6 /* allocate channel from the static area */   

      * #define CHAN_NETWORKVOICE_BASE 7 /* voice data coming across the network */   

      * #define CHAN_NETWORKVOICE_END 500 /* network voice data reserves slots (CHAN_NETWORKVOICE_BASE through CHAN_NETWORKVOICE_END). */  

  
Добавление от артиста:  

![](http://amxxmodx.ru/templates/3week92/dleimages/spoiler-plus.gif) [Показать / Скрыть текст](javascript:ShowOrHide\('spa13f147188b38c83c962d72baaec5519'\))
Не "воспроизводится пока не:"  
  
А, просто это канал, и при воспроизведении по нему другого звука, тот что мы воспроизводили естественно прервётся...  
  
Например CHAN_ITEM - это канал для звуков оружия(выхватывание, возможно ещё и перезарядка, выстрел...)  
  
CHAN_VOICE - если понимать буквально - голосовой канал, возможно у тебя просто стоял плагин который воспроизводит звук получения урона по этому каналу...  
  
Дистанция слышимости у клиента настраивается(кроме голосового получается):  
  
Настройка звука [Команда /Описание ]  
s_a3d включает(1), выключает(0) поддержку A3D  
s_automax_distance устанавливает дистанцию для максимальной громкости  
s_automin_distance устанавливает дистанцию для минимальной громкости  
s_disable_a3d выключает   
a3d s_distance 60 вообщем, чем больше значение, тем ближе все слышно  
s_eax включает(1) или выключает(0) поддержку EAX   
s_enable_a3d включапет   
a3d s_geometry включает(1)или выключает(0) геометрическое разбиение(только для a3d 2.0)  
s_max_distance максимальная дистанция, когда игрок еще слышит звуки (s_min_distance - бесконечность)  
s_min_distance минимальная дистанция, когда игрок начинается слышить звуки (0 - s_max_distance)  
s_numpolys количество полигонов, обрабатываемых в a3d  
s_occfactor проницаемость материала, то есть насколько материал заглушает звук (0 - 1)  
s_refdelay минимальная дистанция между источников и ближайшим отражением  
s_verbwet контролирует "сухость" звуков... чем больше значение, тем более "влажный" звук  
ambient_fade 100 устанавливает дистанцию, на которой слышны "включенные в карту" звуки, например музыка на cs_italy
  

    * **sample[]** - Имя проигрываемого файла ( файлы должны быть предварительно закешированы)  

    * **Float:vol** - Дробное значение громкости  

      * #define VOL_NORM 1.0  

  

    * **Float:att** - Attenuation values Честно говоря не понял для чего это, но обычно все ставят "норм".  

      * #define ATTN_NONE 0.00   

      * #define ATTN_NORM 0.80   

      * #define ATTN_IDLE 2.00   

      * #define ATTN_STATIC 1.25  

  

    * **flags** - Флаги, что с ними делать так же не понял. По экспериментируйте сами, может поймете.  

    * **pitch** - Скорость проигрывания звука, норма 100. Возможное значение от 0 до 255.  

      * #define PITCH_NORM 100 /* non-pitch shifted */   

      * #define PITCH_LOW 95 /* other values are possible - 0-255, where 255 is very high */   

      * #define PITCH_HIGH 120  

  

  
  
**Тип функции:**  
Native  
  
**Пример:**  
```
/* Plugin generated by AMXX-Studio */  
   
#include <amxmodx>  
#include <amxmisc>  
   
#define PLUGIN "[amxmodx.inc] emit sound"  
#define VERSION "1.0"  
#define AUTHOR "Admin"  
   
   
public plugin_init() {  
    register_plugin(PLUGIN, VERSION, AUTHOR)  
       
    register_clcmd("say /sound1","sound_1")  
    register_clcmd("say /sound2","sound_2")  
    register_clcmd("say /sound3","sound_3")  
    register_clcmd("say /sound4","sound_4")  
       
}  
public plugin_precache(){  
     precache_sound( "radio/blow.wav" )  
      
}  
  
public sound_1(id){  
    emit_sound(id,0,"radio/blow.wav",1.0, 1.0, 0, 100 )  
}  
public sound_2(id){  
    emit_sound(id,0,"radio/blow.wav",1.0, ATTN_NORM, 0, PITCH_NORM )  
      
}  
public sound_3(id){  
    emit_sound(id,0,"radio/blow.wav",1.0, 1.0, 0, 50 )  
      
}  
public sound_4(id){  
    emit_sound(id,CHAN_VOICE,"radio/blow.wav",1.0, 1.0, 0, 150 )  
      
}
```
  
  
**Описание:**  
Так как я не разбирался до последнего с этой функцией, пример получился скудноватый,но рабочий.  
Всего в примере 4 команды **say /sound*** , которые вызывают свои функции.  
Во всех них одна и та же функция **emit_sound** , но с различными параметрами.  
  
Обратите **внимание:** Все звуки должны быть закешированны ( plugin_precache ), иначе не будет работать. Так же функция не поддерживает формат mp3.  
  
Думаю нет смысла словами повторять все то что вы услышите на сервере попробовав команды, затем просто попробуйте менять значения и изучайте детальные возможности функции.  
_Новость отредактировал**Admin** - 18-02-2014, 22:23_
Причина: Добавления от Артиста, igas.
